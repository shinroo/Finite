(function () {var c={};var k,g={};!function(){var t={};t.__esModule=!0;var e=function(t){return t.firstChild},n=[];t.addToRawEvents=function(t){n=n.concat(t)};t.getRawEvents=function(){return n};t.replace=function(t,e,n){var r=t;return e.map(function(t,e){r=r.replace(new RegExp(t,"g"),n[e])}),r};t.same=function(t,e){return t.length===e.length&&t.every(function(t,n){return t===e[n]})};t.cleanNode=function(t){for(;e(t);)t.removeChild(e(t))};t.htmlEscape=function(e){return t.replace(e,["&",">","<","\"","'","`"],["&amp;","&gt;","&quot;","&#39;","&#39;","&#96;"])};t.toDOM=function(n,r){var i=document.createElement("template");return i.innerHTML=n.trim(),function t(e,n,r){void 0===r&&(r=!1);var i=e.attributes;if(i&&i.length)for(var s=0;s<i.length;s++){var a=i.item(s).name;a.startsWith("on")&&(e.removeAttribute(a),n(a.slice(2),e,r))}e.childNodes.forEach(function(e){1!==e.nodeType&&8!==e.nodeType||(8===e.nodeType&&("RAW_START"===e.data.trim()&&(r=!0),"RAW_END"===e.data.trim()&&(r=!1)),t(e,n,r))})}(e(i.content),function(e,n,i){var s=i?t.getRawEvents().shift():r.shift();n.addEventListener(e,"function"!=typeof s?function(){}:s)}),e(i.content)};var r={};r.__esModule=!0;var i=function(){function e(t,e){this.lit=t,this.values=e,this.result="",this.events=[],this.isRaw=!1}return e.prototype.checkValues=function(e){return!!t.same(e,this.values)||(this._update(e),!1)},e.prototype.checkLiteral=function(e){return t.same(e,this.lit)},e.prototype.getResult=function(){return""===this.result&&this._update(),{result:this.result,events:this.events}},e.prototype.forceUpdate=function(){this._update()},e.prototype._update=function(e){var n=this;void 0===e&&(e=this.values),this.result="",this.events=[],this.isRaw&&(this.result+="\n<!-- RAW_START -->\n"),e.forEach(function(e,r){var i=n.lit[r];Array.isArray(e)&&(e=e.join("")),i.endsWith("$")&&(e=t.htmlEscape(e),i=i.slice(0,-1)),n.result+=i,i.endsWith("=")?(i.split(" ").pop().startsWith("on")&&n.events.push(e),n.result+="\""+t.replace(e.toString(),["'","\""],["'","'"])+"\""):n.result+=e}),this.result+=this.lit[this.lit.length-1],this.isRaw&&(this.result+="\n<!-- RAW_END -->\n")},e}();r.default=i;var s={},a=s&&s.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};s.__esModule=!0;var o=a(r),u=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return new o.default(t.raw,e)};s.html=u;var l=function(e){e.isRaw=!0,e.forceUpdate();var n=e.getResult(),r=n.result,i=n.events;return t.addToRawEvents(i),r},c=new WeakMap,f=function(e,n){var r=c.get(n);r&&r.checkLiteral(e.lit)?r.checkValues(e.values)||(t.cleanNode(n),n.appendChild(t.toDOM(r.result,r.events))):function(){var r=e.getResult(),i=r.result,s=r.events;c.set(n,e),t.cleanNode(n),n.appendChild(t.toDOM(i,s))}()},h={};h.__esModule=!0;var d=u;h.html=d;var v=l;h.raw=v;var p=f;h.render=p,window.html=u,window.render=f,window.raw=l,"object"==typeof g?g=h:"function"==typeof k&&k.amd&&k(function(){return h})}();var i={};var n={};Object.defineProperty(n,"__esModule",{value:!0});var q=o;function A(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function o(e,r,n){if(!r)return null;return!Array.isArray(r)&&(r=[r]),function e(t){var $=r.shift();if(Array.isArray(t)){var a=t.slice();return a[$]=r.length?e(a[$]):n,a}return Object.assign({},t,A({},$,r.length?e(t[$]):n))}(e)}n.default=q;function w(o){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(o)}var H=function(e){return y(e)&&!r(e)};function y(e){return!!e&&"object"==typeof e}function r(e){var r=Object.prototype.toString.call(e);return"[object RegExp]"===r||"[object Date]"===r||D(e)}var v="function"==typeof Symbol&&Symbol.for,x=v?Symbol.for("react.element"):60103;function D(e){return e.$$typeof===x}function G(e){return Array.isArray(e)?[]:{}}function j(e,r){return!1!==r.clone&&r.isMergeableObject(e)?h(G(e),e,r):e}function s(e,r,$){return e.concat(r).map(function(e){return j(e,$)})}function t(e,r,$){var a={};return $.isMergeableObject(e)&&Object.keys(e).forEach(function(r){a[r]=j(e[r],$)}),Object.keys(r).forEach(function(o){$.isMergeableObject(r[o])&&e[o]?a[o]=h(e[o],r[o],$):a[o]=j(r[o],$)}),a}function h(e,r,$){($=$||{}).arrayMerge=$.arrayMerge||s,$.isMergeableObject=$.isMergeableObject||H;var a=Array.isArray(r);return a===Array.isArray(e)?a?$.arrayMerge(e,r,$):t(e,r,$):j(r,$)}h.all=function(e,r){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(e,$){return h(e,$,r)},{})};var u=h;var l=function(o,e){return function(t){return o(t,e)}};function f(){for(var o=[],e=0;e<arguments.length;e++)o[e]=arguments[e];console.log(o)}l,f;var m=function(o,e,t){void 0===t&&(t=[]),Object.entries(o).forEach(function(o){var r=o[0],$=o[1];!$||"object"!==w($)||$ instanceof Promise?e($,t.concat([r])):m($,e,t.concat([r]))})};var d=function(o,e){return u(o,e,{arrayMerge:function(o,e){return e}})};var z=function(){function t(){this.states=[],this.point=null,this.pointer=null}return t.prototype.add=function(t){this.states.push(t)},t.prototype.find=function(t){return this.states.find(function(n){return n.name===t})},t.prototype.setMountPoint=function(t){this.point=t},t.prototype.getMountPoint=function(){return this.point},t}();var e={};var B=e&&e.__assign||Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var o in r=arguments[e])Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o]);return t},C=e&&e.__rest||function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)r.indexOf(n[o])<0&&(e[n[o]]=t[n[o]])}return e},p=function(){function t(t){var r=t.name,e=t.view,n=t.memory,o=void 0===n?{}:n,i=t.transitions,s=void 0===i?[]:i,a=C(t,["name","view","memory","transitions"]);this.name=r,this.view=e,this.memory=o,this.transitions=s,this.rest=a}return t.prototype.findTransitionsByName=function(t){return this.transitions.find(function(r){return r.name===t})},t.prototype.restWithMemory=function(){var t=this;return Object.keys(this.rest).reduce(function(r,e){var n;return B({},r,((n={})[e]=l(t.rest[e],t.memory),n))},{})},t}();e.State=p;var E=i&&i.__assign||Object.assign||function(e){for(var r,$=1,a=arguments.length;$<a;$++)for(var t in r=arguments[$])Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e},F=i&&i.__rest||function(e,r){var $={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&r.indexOf(a)<0&&($[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var t=0;for(a=Object.getOwnPropertySymbols(e);t<a.length;t++)r.indexOf(a[t])<0&&($[a[t]]=e[a[t]])}return $},b=new z;f("Right now console output only way to debug, so every Transition is logged \n");var a=function(){function e(){}return e.State=function(e){var r=e.name,$=e.view,a=e.memory,t=e.transitions,n=F(e,["name","view","memory","transitions"]),o=new p(E({name:r,view:$,memory:a,transitions:t},n));return b.add(o),o},e.AsyncTransition=function(e,r){void 0===r&&(r={});var $=b.pointer,a=$.findTransitionsByName(e).to,t=b.find(a),n=[];m(r,function(e,r){e instanceof Promise&&n.push([e,r])}),Promise.all(n.reduce(function(e,r){return e.concat([r[0]])},[])).then(function(o){o.map(function(e,$){r=q(r,n[$][1],e)}),t.memory=d(t.memory,r),b.pointer=t,f("ASYNC TRANSITION",e,$.name+" -> "+a,t.memory),g.render(t.view(d(t.memory,t.restWithMemory())),b.getMountPoint())})},e.Transition=function(e,r){void 0===r&&(r={});var $=b.pointer,a=$.findTransitionsByName(e).to,t=b.find(a);t.memory=d(t.memory,r),b.pointer=t,f("TRANSITION",e,$.name+" -> "+a),f(t.view(d(t.memory,t.restWithMemory()))),f(t.view(d(t.memory,t.restWithMemory())).getResult()),g.render(t.view(d(t.memory,t.restWithMemory())),b.getMountPoint())},e.Render=function(e,r){b.setMountPoint(r),b.pointer=e,f("INIT_STATE",e.name||"Anonymous",e.memory),g.render(e.view(d(e.memory,e.restWithMemory())),r)},e.T=function(e,r){return{name:e,to:r}},e}();i.Finite=a;window.h=g.html,window.raw=g.raw,window.Finite=a,window.State=a.State,window.Render=a.Render,window.Transition=a.Transition,window.AsyncTransition=a.AsyncTransition,window.T=a.T;var I=a.State;c.State=I;var J=a.Render;c.Render=J;var K=a.Transition;c.Transition=K;var L=a.AsyncTransition;c.AsyncTransition=L;var M=a.T;c.T=M,c.h=g.html,c.raw=g.raw,c.default=a;if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=c}else if(typeof define==="function"&&define.amd){define(function(){return c})}})();